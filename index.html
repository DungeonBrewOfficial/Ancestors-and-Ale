     
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Drink Generator</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: #1e1e1e;
            color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: #333;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 700px;
            padding: 20px;
            text-align: center;
        }
		.branding {
            text-align: center;
            margin-bottom: 20px;
        }
        .branding img {
            max-width: 100px; /* Adjust the logo size as needed */
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffdd57;
        }
        button {
            background: #222;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #e65c54;
        }
        .drink-details {
            margin-top: 20px;
            background: #444;
            border-radius: 5px;
            padding: 15px;
            text-align: left;
        }
        .drink-details p {
            margin: 5px 0;
        }
		 label {
			margin-right: 10px;
		}
		select, input[type="checkbox"] {
			margin-left: 5px;
		}
		div[style="margin-bottom: 20px;"] {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 10px;
		}
		.scrollable-box {
			max-height: 600px; /* Set the height of the box */
			overflow-y: auto; /* Enable vertical scrolling */
			border: 1px solid #444; /* Add a border for better visibility */
			padding: 10px;
			background: #222; /* Match the container background */
			border-radius: 5px;
			text-align: left; /* Align content to the left */
		}

		.scrollable-box li:nth-child(even) {
			background: #444; /* Slightly lighter for alternate rows */
		}
		.scrollable-box li strong {
			color: #ffdd57; /* Highlight drink names */
		}
		.scrollable-box li {
			padding: 10px;
			border-radius: 5px;
		}

		.scrollable-box li {
			text-align: left; /* Ensure individual list items are left-aligned */
			margin-bottom: 10px; /* Add spacing between items */
		}
    </style>
</head>
<body>
    <div class="container">
        <div class="branding">
			<a href="https://www.patreon.com/DungeonBrew" target="_blank">
				<img src="Updated Logo.png" alt="Company Logo">
			</a>
        </div>
    <div class="container">
	<div class="container">
		<h1>ANCESTORS & ALE</h1>
		<h1>Random Drink Generator</h1>

		<!-- User Controls Section -->
		<div style="margin-bottom: 20px;">
			<label for="beerType">Choose Beer Type:</label>
			<select id="beerType">
				<option value="any">Random</option>
				<option value="Bock">Bock</option>
				<option value="Dark Ale">Dark Ale</option>
				<option value="Hoppy Pale Ale">Hoppy Pale Ale</option>
				<option value="Lager">Lager</option>
				<option value="Pale Ale">Pale Ale</option>
				<option value="Pilsner">Pilsner</option>
				<option value="Porter">Porter</option>
				<option value="Saison">Saison</option>
				<option value="Sour">Sour</option>
				<option value="Stout">Stout</option>
				<option value="Tripel">Tripel</option>
				<option value="Wheat Beer">Wheat Beer</option>
			</select>
		</div>

		<div style="margin-bottom: 20px;">
			<label>
				<input type="checkbox" id="includeFruits" checked> Include Fruits
			</label>
			<label>
				<input type="checkbox" id="includeSpices" checked> Include Spices
			</label>
			<label>
				<input type="checkbox" id="includeOffFlavors"> Include Off-Flavors
			</label>
		</div>

		<!-- Buttons for Generating and Saving Drinks -->
		<button id="generate-drink">Generate Drink</button>
		<button id="saveDrink">Save Drink</button>
		<button id="downloadList">Download Drink List</button>

		<!-- Display Generated Drink -->
		<div class="drink-details" id="drinkDetails">
			<h2 id="drinkName" style="font-size: 1.5rem; color: #ffdd57; margin: 10px 0;"></h2>
			<p><strong>Appearance:</strong> <span id="appearance"></span></p>
			<p><strong>Scent:</strong> <span id="scent"></span></p>
			<p><strong>Flavor:</strong> <span id="taste"></span></p>
			<p><strong>Mouthfeel:</strong> <span id="mouthfeel"></span></p>
		</div>

		<!-- Saved Drinks Section -->
		<h3>Saved Drinks:</h3>
		<div class="scrollable-box">
			<ul id="savedDrinksList" style="list-style-type: none; padding: 0;"></ul>
		</div>

	</div>

    <script>
        const drinkAttributes = {
			namePrefixes: ["Iron", "Steel", "Copper", "Bronze", "Brass", "Lead", "Granite", "Obsidian", "Onyx", "Marble", "Slate", "Basalt", "Quartz", "Crimson", "Ruby", "Amber", "Charcoal", "Ivory", "Pale", "Ebony", "Ashen", "Frost", "Fire", "Flame", "Cold", "Ember", "Smoke", "Blaze", "Shadow", "Stone"],
			nameAdjectives: ["Crown", "Shield", "Axe", "Hammer", "Spear", "Hearth", "Forge", "Smith", "Anvil", "Mountain", "Peak", "Summit", "Barrow", "Hollow", "Vault", "Ring", "Blade", "Throne", "Mace", "Sword", "Chain", "Spindle", "Gate", "Deep", "Dagger", "Tomb", "Bastion", "Haven", "Spire"],			
			nameTypes: ["Bock", "Dark Ale", "Hoppy Pale Ale", "Lager", "Pale Ale", "Pilsner", "Porter", "Saison", "Sour", "Stout", "Tripel", "Wheat Beer"],
            liquidShades: ["Light", "Medium", "Deep", "Dark", "Reddish", "Purplish", "Ruby"],
            liquidHues: ["Straw", "Yellow", "Gold", "Amber", "Copper", "Brown", "Walnut", "Black"],
            clarity: ["Brilliant", "Clear", "Slightly Hazy", "Hazy", "Cloudy", "Opaque"],
            foamTextures: ["None", "Poor", "Moderate", "Good", "Thin", "Wispy", "Fluffy", "Mousse-like"],
            foamHues: ["White", "Cream", "Tan", "Yellow", "Brownish", "Reddish", "Amber", "Gold"],
            malts: ["Malty", "Biscuity", "Bread-like", "Grainy", "Rich", "Deep", "Roasted", "Coffee", "Caramel", "Toffee-like", "Molasses", "Smokey", "Sweet", "Autumnal", "Burnt Cream", "Oatmeal", "Complex", "Layered"],
            hops: ["Pine", "Citrus", "Earthy", "Musty", "Spicy", "Grassy", "Bright", "Fresh", "Herbal", "Juniper-like", "Lemony", "Floral", "Spring-like", "Minty", "Spruce-like", "Orangey", "Zippy", "Brilliant", "Pungent", "Sharp"],
            fruits: ["Citrus", "Lemon", "Orange", "Cherry", "Strawberry", "Blueberry", "Blackberry", "Wild Berry", "Apricot", "Rhubarb", "Apple", "Blackcurrant", "Peach", "Red Plum", "Blue Plum", "Date", "Gooseberry", "Cranberry", "Fig", "Tart"],
            spices: ["Pepper", "Clover", "Anise", "Woodruff", "Cinnamon", "Vanilla", "Nutmeg", "Ginger", "Fennel", "Saffron", "Juniper", "Maple", "Heather", "Hibiscus", "Coriander", "Elderflower", "Peppermint"],
            mouthfeel: ["Thick", "Creamy", "Watery", "Balanced", "Full", "Heavy", "Medium", "Light", "Dense", "Viscous", "Thin", "Crisp", "Flat", "Round", "Sharp", "Silky", "Prickly", "Wispy", "Velvety", "Delicate", "Spritzy", "Robust", "Hot"],
            afterfeel: ["Astringent", "Sticky", "Smooth", "Dry", "Oily", "Bitter", "Warming", "Effervescent", "Clean", "Gassy", "Vanishing", "Tingly"],
            offFlavors: ["Medicinal", "Chemical", "Rotten", "Barnyard", "Rancid", "Muddy", "Clove", "Green Leaves", "Sweat", "Buttery", "Vinegary", "Peanut-like"]
        };

        const maltsSynonyms = {
            Malty: ["Toasty", "Nutty", "Biscuity", "Cereal-like"],
            Biscuity: ["Crumbly", "Dry", "Cracker-like"],
            "Bread-like": ["Yeasty", "Doughy", "Crusty"],
            Grainy: ["Rustic", "Hearty", "Earthy"],
            Rich: ["Deep", "Velvety", "Bold"],
            Deep: ["Dark", "Complex", "Robust"],
            Roasted: ["Smokey", "Charred", "Burnt"],
            Coffee: ["Espresso-like", "Bold", "Dark-roasted"],
            Caramel: ["Toffee", "Sweet", "Sugary"],
            "Toffee-like": ["Caramelized", "Rich", "Brown-sugared"],
            Molasses: ["Dark-sugared", "Syrupy", "Rich"],
            Smokey: ["Burnt", "Charred", "Ashy"],
            Sweet: ["Sugary", "Honeyed", "Soft"],
            Autumnal: ["Spiced", "Toasty", "Warm"],
            "Burnt Cream": ["Caramelized", "Scorched", "Rich"],
            Oatmeal: ["Creamy", "Subtle", "Soft"],
            Complex: ["Layered", "Multifaceted", "Robust"],
            Layered: ["Complex", "Multinoted", "Varied"],
        };

        const hopsSynonyms = {
            Pine: ["Resinous", "Woody"],
            Citrus: ["Zesty", "Tangy", "Bright"],
            Earthy: ["Herbal", "Rooty", "Damp"],
            Musty: ["Dank", "Aged", "Subtle"],
            Spicy: ["Sharp", "Peppery"],
            Grassy: ["Fresh", "Green", "Bright"],
            Bright: ["Vivid", "Lively", "Clean"],
            Fresh: ["Crisp", "Cool", "Zesty"],
            Herbal: ["Aromatic", "Floral"],
            "Juniper-like": ["Resinous", "Woody"],
            Lemony: ["Citrusy", "Tart"],
            Floral: ["Aromatic", "Perfumed"],
            "Spring-like": ["Fresh", "Budding"],
            Minty: ["Cool", "Refreshing"],
            "Spruce-like": ["Evergreen", "Sharp"],
            Orangey: ["Juicy", "Tart"],
            Zippy: ["Sharp", "Citrusy"],
            Brilliant: ["Vivid", "Bright"],
            Pungent: ["Sharp", "Aromatic"],
            Sharp: ["Tangy", "Crisp"],
        };
		
		const fruitsSynonyms = {
			Citrus: ["Tart", "Zesty", "Tangy"],
			Lemon: ["Citrusy", "Bright", "Sharp"],
			Orange: ["Tangy", "Juicy", "Sweet"],
			Cherry: ["Tart", "Juicy", "Rich"],
			Strawberry: ["Sweet", "Juicy", "Jammy"],
			Blueberry: ["Fruity", "Soft", "Ripe"],
			Blackberry: ["Jammy", "Ripe", "Sweet"],
			"Wild Berry": ["Mixed-berry", "Rich", "Tangy"],
			Apricot: ["Stone-fruit", "Sweet", "Ripened"],
			Rhubarb: ["Tart", "Bright", "Earthy"],
			Apple: ["Crisp", "Tart", "Sweet"],
			Blackcurrant: ["Fruity", "Rich", "Tangy"],
			Peach: ["Stone-fruit", "Juicy", "Ripe"],
			"Red Plum": ["Tangy", "Juicy", "Vivid"],
			"Blue Plum": ["Rich", "Sweet", "Ripe"],
			Date: ["Syrupy", "Rich", "Sweet"],
			Gooseberry: ["Tart", "Zesty", "Green"],
			Cranberry: ["Tart", "Juicy", "Bright"],
			Fig: ["Rich", "Sweet", "Jammy"],
			Tart: ["Zesty", "Bright", "Tangy"],
		};

		const spicesSynonyms = {
			Pepper: ["Sharp", "Pungent", "Spicy"],
			Clover: ["Herbal", "Earthy", "Sweet"],
			Anise: ["Licorice-like", "Sweet", "Sharp"],
			Woodruff: ["Earthy", "Herbal", "Grassy"],
			Cinnamon: ["Warm", "Sweet", "Aromatic"],
			Vanilla: ["Creamy", "Rich", "Sweet"],
			Nutmeg: ["Earthy", "Warm", "Subtle"],
			Ginger: ["Zesty", "Bright", "Sharp"],
			Fennel: ["Licorice-like", "Aromatic"],
			Saffron: ["Aromatic", "Golden", "Rich"],
			Juniper: ["Woody", "Resinous", "Sharp"],
			Maple: ["Sweet", "Earthy", "Rich"],
			Heather: ["Floral", "Herbal", "Earthy"],
			Hibiscus: ["Floral", "Tangy", "Bright"],
			Coriander: ["Citrusy", "Bright", "Herbal"],
			Elderflower: ["Floral", "Sweet", "Perfumed"],
			Peppermint: ["Cool", "Refreshing", "Bright"],
		};
		
		const beerTypeColorRanges = {
			"Bock": ["Amber", "Brown"],
			"Dark Ale": ["Copper", "Walnut"],
			"Hoppy Pale Ale": ["Straw", "Gold"],
			"Lager": ["Straw", "Gold"],
			"Pale Ale": ["Straw", "Gold"],
			"Pilsner": ["Yellow", "Amber"],
			"Porter": ["Copper", "Walnut"],
			"Saison": ["Straw", "Gold"],
			"Sour": ["Yellow", "Amber"],
			"Stout": ["Brown", "Black"],
			"Tripel": ["Yellow", "Amber"],
			"Wheat Beer": ["Straw", "Gold"]
		};

        function rollAgain(table) {
            let result;
            do {
                result = table[Math.floor(Math.random() * table.length)];
            } while (result === "Roll Again");
            return result;
        }

        function resolveComplex(table) {
            const first = rollAgain(table);
            const second = rollAgain(table);
            return `Complex with ${first} and ${second}`;
        }

        function resolveLayered(table) {
            const first = rollAgain(table);
            const second = rollAgain(table);
            return `Layered with ${first} and ${second}`;
        }

        function resolveRollMultiple(table, count) {
            const results = [];
            for (let i = 0; i < count; i++) {
                results.push(rollAgain(table));
            }
            return results.join(", ");
        }

        function resolveTart(table) {
            const reroll = rollAgain(table);
            return `Tart ${reroll}`;
        }

		function resolveHopModifier(modifier, table) {
			let baseHop;
			let attempts = 0;
			do {
				baseHop = rollAgain(table);
				attempts++;
			} while (baseHop === modifier && attempts < 10); // Avoid repeating the modifier
			return `${modifier} ${baseHop}`;
		}

        function resolveOffFlavors(table) {
            return rollAgain(table);
        }

        function resolveNone(texture, hue) {
            if (texture === "None") {
                return ""; // Omit foam entirely if texture is "None"
            }
            return `${texture.toLowerCase()} foam with a ${hue.toLowerCase()} hue`;
        }

		function roll(table) {
			if (!table || table.length === 0) return "undefined"; // Fallback for empty tables
			let result = table[Math.floor(Math.random() * table.length)];

			// Handle special hop modifiers
			if (["Brilliant", "Pungent", "Sharp"].includes(result) && Math.random() < 0.5) {
				return resolveHopModifier(result, table);
			}

			if (result === "Complex") {
				return resolveComplex(table);
			}
			if (result === "Layered") {
				return resolveLayered(table);
			}
			if (result === "Tart") {
				return resolveTart(table);
			}
			if (result === "Roll Again") {
				return rollAgain(table);
			}
			if (result.includes("Roll x2")) {
				return resolveRollMultiple(table, 2);
			}
			if (result.includes("Roll x3")) {
				return resolveRollMultiple(table, 3);
			}
			if (result.includes("Roll Off-Flavors")) {
				return resolveOffFlavors(drinkAttributes.offFlavors);
			}

			return result;
		}
		
		function rollWithSynonyms(attribute, synonyms) {
			const primary = attribute[Math.floor(Math.random() * attribute.length)];
			const synonym = synonyms[primary];
			return Math.random() < 0.5 && synonym ? synonym[Math.floor(Math.random() * synonym.length)] : primary;
		}
		
		function rollWithSynonymsNoRepeats(attribute, synonyms, usedWords = new Set()) {
			let primary, synonym, attempts = 0;
			do {
				primary = attribute[Math.floor(Math.random() * attribute.length)];
				synonym = synonyms[primary]
					? synonyms[primary][Math.floor(Math.random() * synonyms[primary].length)]
					: null;
				attempts++;
			} while ((usedWords.has(primary) || (synonym && usedWords.has(synonym))) && attempts < 10);

			const result = Math.random() < 0.5 && synonym ? synonym : primary;
			usedWords.add(result);
			return result;
		}

		function getArticle(word) {
			const vowels = ["a", "e", "i", "o", "u"];
			return vowels.includes(word.trim().toLowerCase()[0]) ? "an" : "a";
		}

        function generateDrinkName() {
            const prefix = roll(drinkAttributes.namePrefixes);
            const adjective = roll(drinkAttributes.nameAdjectives);
            const type = roll(drinkAttributes.nameTypes);
            return `${prefix} ${adjective} ${type}`;
        }
		
		function rollColorForType(type, usedColors = new Set()) {
			const validColors = beerTypeColorRanges[type];
			if (!validColors || validColors.length === 0) {
				return "Amber"; // Default fallback
			}

			let color;
			let attempts = 0;
			do {
				color = validColors[Math.floor(Math.random() * validColors.length)];
				attempts++;
			} while (usedColors.has(color) && attempts < 10);

			usedColors.add(color);
			return color;
		}

			const savedDrinks = []; // Global array for saved drinks

			// Save the generated drink to the on-screen list
			document.getElementById("saveDrink").addEventListener("click", () => {
				const drinkName = document.getElementById("drinkName").textContent;
				const appearance = document.getElementById("appearance").textContent;
				const scent = document.getElementById("scent").textContent;
				const flavor = document.getElementById("taste").textContent;
				const mouthfeel = document.getElementById("mouthfeel").textContent;

				if (!drinkName.trim()) {
					alert("Please generate a drink before saving!");
					return;
				}

				// Compile drink details into a single string
				const drinkDetails = `${drinkName}\nAppearance: ${appearance}\nScent: ${scent}\nFlavor: ${flavor}\nMouthfeel: ${mouthfeel}`;

				// Check for duplicate drinks in the savedDrinks array
				if (savedDrinks.some(drink => drink === drinkDetails)) {
					alert("This drink has already been saved!");
					return;
				}

				// Add the drink to the savedDrinks array
				savedDrinks.push(drinkDetails);

				// Update the saved drinks list on-screen
				const listItem = document.createElement("li");
				listItem.innerHTML = `<strong>${drinkName}</strong><br>
					Appearance: ${appearance}<br>
					Scent: ${scent}<br>
					Flavor: ${flavor}<br>
					Mouthfeel: ${mouthfeel}`;
				listItem.style.marginBottom = "10px";
				document.getElementById("savedDrinksList").appendChild(listItem);
			});

			// Download the full list of saved drinks
			document.getElementById("downloadList").addEventListener("click", () => {
				if (savedDrinks.length === 0) {
					alert("No drinks saved to download!");
					return;
				}

				// Compile saved drinks into a text file
				const blob = new Blob([savedDrinks.join("\n\n")], { type: "text/plain" });
				const link = document.createElement("a");
				link.href = URL.createObjectURL(blob);
				const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, "-");
				link.download = `drink_list_${timestamp}.txt`;
				link.click();
			});

			// Generate a random drink
			function generateDrink() {
				const debug = true;
				const usedWords = new Set();

				// Retrieve user selections
				const selectedType = document.getElementById("beerType").value;
				const includeFruits = document.getElementById("includeFruits").checked;
				const includeSpices = document.getElementById("includeSpices").checked;
				const includeOffFlavors = document.getElementById("includeOffFlavors").checked;

				// Debugging logs for user preferences
				if (debug) {
					console.log("Selected Beer Type:", selectedType);
					console.log("Include Fruits:", includeFruits);
					console.log("Include Spices:", includeSpices);
					console.log("Include Off-Flavors:", includeOffFlavors);
				}

				// Generate drink attributes
				const nameType = selectedType === "any" ? roll(drinkAttributes.nameTypes) : selectedType;
				const name = `${roll(drinkAttributes.namePrefixes)} ${roll(drinkAttributes.nameAdjectives)} ${nameType}`;

				const foamTexture = roll(drinkAttributes.foamTextures);
				const foamHue = roll(drinkAttributes.foamHues);
				const foamDescription = resolveNone(foamTexture, foamHue);

				const liquidShade = roll(drinkAttributes.liquidShades);
				const liquidHue = rollColorForType(nameType);

				const clarity = roll(drinkAttributes.clarity); // Roll clarity first
				const appearance = `${liquidShade} ${liquidHue} with ${getArticle(clarity)} ${clarity} clarity${foamDescription ? ` and ${foamDescription}` : ""}.`;

				// Add off-flavors conditionally
				const offFlavor = includeOffFlavors && Math.random() < 0.1
					? ` and ${resolveOffFlavors(drinkAttributes.offFlavors)}`
					: "";

				const scent = `${rollWithSynonymsNoRepeats(drinkAttributes.malts, maltsSynonyms, usedWords)} and ${rollWithSynonymsNoRepeats(drinkAttributes.hops, hopsSynonyms, usedWords)}${offFlavor}.`;

				const fruitFlavor = includeFruits
					? rollWithSynonymsNoRepeats(drinkAttributes.fruits, fruitsSynonyms, usedWords)
					: "balanced";
				const spiceFlavor = includeSpices
					? rollWithSynonymsNoRepeats(drinkAttributes.spices, spicesSynonyms, usedWords)
					: "subtle";

				let tasteBase = `${rollWithSynonymsNoRepeats(drinkAttributes.malts, maltsSynonyms, usedWords)} and ${rollWithSynonymsNoRepeats(drinkAttributes.hops, hopsSynonyms, usedWords)}`;
				let taste = tasteBase;

				if (fruitFlavor && spiceFlavor) {
					taste += `, offering ${fruitFlavor} notes and spiced with ${spiceFlavor}`;
				} else if (fruitFlavor) {
					taste += `, featuring ${fruitFlavor} notes`;
				} else if (spiceFlavor) {
					taste += `, with subtle hints of ${spiceFlavor}`;
				} else {
					taste += ", offering a balanced flavor profile."; // Ensure smooth fallback
				}

				const afterfeel = roll(drinkAttributes.afterfeel).trim();
				const mouthfeel = `A ${roll(drinkAttributes.mouthfeel)} texture, with ${getArticle(afterfeel)} ${afterfeel} finish.`;

				// Debugging logs
				if (debug) {
					console.log("Generated Drink Details:");
					console.log({
						Name: name,
						Appearance: appearance,
						Scent: scent,
						Taste: taste,
						Mouthfeel: mouthfeel,
					});

					console.log("Debugging Rolls:");
					console.log("Malts Roll:", drinkAttributes.malts);
					console.log("Hops Roll:", drinkAttributes.hops);
					if (includeFruits) console.log("Fruits Roll:", drinkAttributes.fruits);
					if (includeSpices) console.log("Spices Roll:", drinkAttributes.spices);
					if (includeOffFlavors) console.log("Off-Flavors Roll:", drinkAttributes.offFlavors);
				}

				// Update drink details on the page
				document.getElementById("drinkName").textContent = name;
				document.getElementById("appearance").textContent = appearance;
				document.getElementById("scent").textContent = scent;
				document.getElementById("taste").textContent = taste;
				document.getElementById("mouthfeel").textContent = mouthfeel;

				if (debug) {
					console.log("Drink successfully generated and displayed on the page.");
				}
			}

	document.getElementById("generate-drink").addEventListener("click", generateDrink);

    </script>
</body>
</html>
